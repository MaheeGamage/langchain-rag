# Session: 2026-02-21 #004

## Goal
Combine FastAPI and Streamlit into a single `python run.py` command so both
servers start and stop together.

## Prompts Summary
- User asked to integrate everything and run with a single command.

## Actions Taken

- **`run.py`** — full rewrite:
  - Removed direct `uvicorn.run()` call.
  - Added `FASTAPI_CMD` and `STREAMLIT_CMD` lists using `sys.executable` to
    ensure the correct venv interpreter is used.
  - Launches both processes via `subprocess.Popen` with `stdout=PIPE`.
  - Two daemon threads (`_pipe_output`) forward each process's output to stdout
    prefixed with `[api]` or `[ui ]`.
  - Main loop blocks until either process exits unexpectedly.
  - `KeyboardInterrupt` (Ctrl+C) triggers graceful `terminate()` + 5 s
    `wait()` / `kill()` for both processes.

- **`AGENTS.md`** — Section 2 updated:
  - Replaced separate FastAPI / Streamlit run instructions with a "Run both
    servers (recommended)" block for `python run.py`, plus standalone
    alternatives for each service.

- **`README.md`** — Updated run instructions to lead with `python run.py`
  and include a service/URL table; standalone commands kept as alternatives.

## Outcome
`python run.py` starts both servers, prints labelled output, and shuts both
down cleanly on Ctrl+C.

## Agent
GitHub Copilot (Claude Sonnet 4.6)
